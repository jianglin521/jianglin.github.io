<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>你会用ES6，那倒是用啊！ | 降临的文档库</title>
    <meta name="description" content="前端工程师 降临 的文档库">
    <link rel="icon" href="/img/logo.ico">
    
    <link rel="preload" href="/assets/css/0.styles.68be1f38.css" as="style"><link rel="preload" href="/assets/js/app.995752a5.js" as="script"><link rel="preload" href="/assets/js/34.d5f7e75c.js" as="script"><link rel="prefetch" href="/assets/js/10.7ba200ab.js"><link rel="prefetch" href="/assets/js/11.30774d50.js"><link rel="prefetch" href="/assets/js/12.a6154501.js"><link rel="prefetch" href="/assets/js/13.1842fe60.js"><link rel="prefetch" href="/assets/js/14.2274fafe.js"><link rel="prefetch" href="/assets/js/15.74b75367.js"><link rel="prefetch" href="/assets/js/16.306eb805.js"><link rel="prefetch" href="/assets/js/17.06ac4811.js"><link rel="prefetch" href="/assets/js/18.8e258bb9.js"><link rel="prefetch" href="/assets/js/19.d4e0ece7.js"><link rel="prefetch" href="/assets/js/2.7974f97d.js"><link rel="prefetch" href="/assets/js/20.bba3d085.js"><link rel="prefetch" href="/assets/js/21.7747c897.js"><link rel="prefetch" href="/assets/js/22.9fa1b8d9.js"><link rel="prefetch" href="/assets/js/23.4acae357.js"><link rel="prefetch" href="/assets/js/24.52051622.js"><link rel="prefetch" href="/assets/js/25.6590a986.js"><link rel="prefetch" href="/assets/js/26.6f2ad252.js"><link rel="prefetch" href="/assets/js/27.b3923955.js"><link rel="prefetch" href="/assets/js/28.c30abf97.js"><link rel="prefetch" href="/assets/js/29.576dd794.js"><link rel="prefetch" href="/assets/js/3.e4243c02.js"><link rel="prefetch" href="/assets/js/30.20a16a53.js"><link rel="prefetch" href="/assets/js/31.d4015c34.js"><link rel="prefetch" href="/assets/js/32.814252d0.js"><link rel="prefetch" href="/assets/js/33.0c2237e1.js"><link rel="prefetch" href="/assets/js/35.79227d4d.js"><link rel="prefetch" href="/assets/js/36.c7d54dd7.js"><link rel="prefetch" href="/assets/js/37.50f71524.js"><link rel="prefetch" href="/assets/js/38.c7422de1.js"><link rel="prefetch" href="/assets/js/39.6c0f42fa.js"><link rel="prefetch" href="/assets/js/4.86b8f79f.js"><link rel="prefetch" href="/assets/js/40.112b90d5.js"><link rel="prefetch" href="/assets/js/41.96b40c26.js"><link rel="prefetch" href="/assets/js/42.94a52bfe.js"><link rel="prefetch" href="/assets/js/43.0b25d56b.js"><link rel="prefetch" href="/assets/js/44.2187ba9b.js"><link rel="prefetch" href="/assets/js/45.25b00606.js"><link rel="prefetch" href="/assets/js/46.f8771e2f.js"><link rel="prefetch" href="/assets/js/47.ae635215.js"><link rel="prefetch" href="/assets/js/48.720d084c.js"><link rel="prefetch" href="/assets/js/49.f2c40a89.js"><link rel="prefetch" href="/assets/js/5.d5354611.js"><link rel="prefetch" href="/assets/js/50.5cfdc6c1.js"><link rel="prefetch" href="/assets/js/51.99387442.js"><link rel="prefetch" href="/assets/js/52.983ca453.js"><link rel="prefetch" href="/assets/js/53.71e73fd7.js"><link rel="prefetch" href="/assets/js/54.3b892224.js"><link rel="prefetch" href="/assets/js/55.fddd0f4c.js"><link rel="prefetch" href="/assets/js/56.5236f3cd.js"><link rel="prefetch" href="/assets/js/57.909ffd38.js"><link rel="prefetch" href="/assets/js/58.db40ae63.js"><link rel="prefetch" href="/assets/js/59.3cbfd9b2.js"><link rel="prefetch" href="/assets/js/6.430aa244.js"><link rel="prefetch" href="/assets/js/60.bfd31102.js"><link rel="prefetch" href="/assets/js/61.1388b55c.js"><link rel="prefetch" href="/assets/js/62.831c1253.js"><link rel="prefetch" href="/assets/js/63.e8b37825.js"><link rel="prefetch" href="/assets/js/64.fa443c2e.js"><link rel="prefetch" href="/assets/js/65.1ff70412.js"><link rel="prefetch" href="/assets/js/66.2fbd6604.js"><link rel="prefetch" href="/assets/js/67.ddd89037.js"><link rel="prefetch" href="/assets/js/7.92555542.js"><link rel="prefetch" href="/assets/js/8.55491de6.js"><link rel="prefetch" href="/assets/js/9.6ecf1618.js">
    <link rel="stylesheet" href="/assets/css/0.styles.68be1f38.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">降临的文档库</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/work/计划.html" class="nav-link">工作</a></div><div class="nav-item"><a href="/vue/vueCreate.html" class="nav-link">Vue</a></div><div class="nav-item"><a href="/js/es6.html" class="nav-link">js</a></div><div class="nav-item"><a href="/css/often.html" class="nav-link">css</a></div><div class="nav-item"><a href="/mobile/rem.html" class="nav-link">移动端</a></div><div class="nav-item"><a href="/tools/MongoDB.html" class="nav-link">工具</a></div><div class="nav-item"><a href="/other/修改Git提交记录.html" class="nav-link">文档</a></div><div class="nav-item"><a href="https://github.com/jianglin521" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/work/计划.html" class="nav-link">工作</a></div><div class="nav-item"><a href="/vue/vueCreate.html" class="nav-link">Vue</a></div><div class="nav-item"><a href="/js/es6.html" class="nav-link">js</a></div><div class="nav-item"><a href="/css/often.html" class="nav-link">css</a></div><div class="nav-item"><a href="/mobile/rem.html" class="nav-link">移动端</a></div><div class="nav-item"><a href="/tools/MongoDB.html" class="nav-link">工具</a></div><div class="nav-item"><a href="/other/修改Git提交记录.html" class="nav-link">文档</a></div><div class="nav-item"><a href="https://github.com/jianglin521" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/other/修改Git提交记录.html" class="sidebar-link">修改Git提交记录</a></li><li><a href="/other/jenkins自动部署.html" class="sidebar-link">jenkins自动部署</a></li><li><a href="/other/typescript基础类型.html" class="sidebar-link">typescript基础类型</a></li><li><a href="/other/typescript快速入门.html" class="sidebar-link">typescript快速入门</a></li><li><a href="/other/vue3项目搭建.html" class="sidebar-link">vue3项目搭建</a></li><li><a href="/other/vue自动部署.html" class="sidebar-link">vue自动部署</a></li><li><a href="/other/webpack教程.html" class="sidebar-link">webpack教程</a></li><li><a href="/other/webpack起步.html" class="sidebar-link">webpack起步</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="你会用es6，那倒是用啊！"><a href="#你会用es6，那倒是用啊！" aria-hidden="true" class="header-anchor">#</a> 你会用ES6，那倒是用啊！</h1> <p><strong>ps：ES5之后的JS语法统称ES6！！！</strong></p> <h2 id="一、关于取值的吐槽"><a href="#一、关于取值的吐槽" aria-hidden="true" class="header-anchor">#</a> 一、关于取值的吐槽</h2> <p>取值在程序中非常常见，比如从对象<code>obj</code>中取值。</p> <div class="language- extra-class"><pre class="language-text"><code>const obj = {
    a:1,
    b:2,
    c:3,
    d:4,
    e:5,
}
复制代码
</code></pre></div><p><strong>吐槽</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>const a = obj.a;
const b = obj.b;
const c = obj.c;
const d = obj.d;
const e = obj.e;
复制代码
</code></pre></div><p>或者</p> <div class="language- extra-class"><pre class="language-text"><code>const f = obj.a + obj.d;
const g = obj.c + obj.e;
复制代码
</code></pre></div><p>吐槽：“不会用ES6的解构赋值来取值吗？5行代码用1行代码搞定不香吗？直接用对象名加属性名去取值，要是对象名短还好，很长呢？搞得代码中到处都是这个对象名。”</p> <p><strong>改进</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>const {a,b,c,d,e} = obj;
const f = a + d;
const g = c + e;
复制代码
</code></pre></div><p><strong>反驳</strong></p> <p>不是不用ES6的解构赋值，而是服务端返回的数据对象中的属性名不是我想要的，这样取值，不是还得重新创建个遍历赋值。</p> <p><strong>吐槽</strong></p> <p>看来你对ES6的解构赋值掌握的还是不够彻底。如果想创建的变量名和对象的属性名不一致，可以这么写：</p> <div class="language- extra-class"><pre class="language-text"><code>const {a:a1} = obj;
console.log(a1);// 1
复制代码
</code></pre></div><p><strong>补充</strong></p> <p>ES6的解构赋值虽然好用。但是要注意解构的对象不能为<code>undefined</code>、<code>null</code>。否则会报错，故要给被解构的对象一个默认值。</p> <div class="language- extra-class"><pre class="language-text"><code>const {a,b,c,d,e} = obj || {};
复制代码
</code></pre></div><h2 id="二、关于合并数据的吐槽"><a href="#二、关于合并数据的吐槽" aria-hidden="true" class="header-anchor">#</a> 二、关于合并数据的吐槽</h2> <p>比如合并两个数组，合并两个对象。</p> <div class="language- extra-class"><pre class="language-text"><code>const a = [1,2,3];
const b = [1,5,6];
const c = a.concat(b);//[1,2,3,1,5,6]

const obj1 = {
  a:1,
}
const obj1 = {
  b:1,
}
const obj = Object.assgin({}, obj1, obj2);//{a:1,b:1}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>ES6的扩展运算符是不是忘记了，还有数组的合并不考虑去重吗？</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const a = [1,2,3];
const b = [1,5,6];
const c = [...new Set([...a,...b])];//[1,2,3,5,6]

const obj1 = {
  a:1,
}
const obj2 = {
  b:1,
}
const obj = {...obj1,...obj2};//{a:1,b:1}
复制代码
</code></pre></div><h2 id="三、关于拼接字符串的吐槽"><a href="#三、关于拼接字符串的吐槽" aria-hidden="true" class="header-anchor">#</a> 三、关于拼接字符串的吐槽</h2> <div class="language- extra-class"><pre class="language-text"><code>const name = '小明';
const score = 59;
const result = '';
if(score &gt; 60){
  result = `${name}的考试成绩及格`; 
}else{
  result = `${name}的考试成绩不及格`; 
}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>像你们这样用ES6字符串模板，还不如不用，你们根本不清楚在<code>${}</code>中可以做什么操作。在<code>${}</code>中可以放入任意的JavaScript表达式，可以进行运算，以及引用对象属性。</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const name = '小明';
const score = 59;
const result = `${name}${score &gt; 60?'的考试成绩及格':'的考试成绩不及格'}`;
复制代码
</code></pre></div><h2 id="四、关于if中判断条件的吐槽"><a href="#四、关于if中判断条件的吐槽" aria-hidden="true" class="header-anchor">#</a> 四、关于if中判断条件的吐槽</h2> <div class="language- extra-class"><pre class="language-text"><code>if(
    type == 1 ||
    type == 2 ||
    type == 3 ||
    type == 4 ||
){
   //...
}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>ES6中数组实例方法<code>includes</code>会不会使用呢？</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const condition = [1,2,3,4];

if( condition.includes(type) ){
   //...
}
复制代码
</code></pre></div><h2 id="五、关于列表搜索的吐槽"><a href="#五、关于列表搜索的吐槽" aria-hidden="true" class="header-anchor">#</a> 五、关于列表搜索的吐槽</h2> <p>在项目中，一些没分页的列表的搜索功能由前端来实现，搜索一般分为精确搜索和模糊搜索。搜索也要叫过滤，一般用<code>filter</code>来实现。</p> <div class="language- extra-class"><pre class="language-text"><code>const a = [1,2,3,4,5];
const result = a.filter( 
  item =&gt;{
    return item === 3
  }
)
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>如果是精确搜索不会用ES6中的<code>find</code>吗？性能优化懂么，<code>find</code>方法中找到符合条件的项，就不会继续遍历数组。</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const a = [1,2,3,4,5];
const result = a.find( 
  item =&gt;{
    return item === 3
  }
)
复制代码
</code></pre></div><h2 id="六、关于扁平化数组的吐槽"><a href="#六、关于扁平化数组的吐槽" aria-hidden="true" class="header-anchor">#</a> 六、关于扁平化数组的吐槽</h2> <p>一个部门JSON数据中，属性名是部门id，属性值是个部门成员id数组集合，现在要把有部门的成员id都提取到一个数组集合中。</p> <div class="language- extra-class"><pre class="language-text"><code>const deps = {
'采购部':[1,2,3],
'人事部':[5,8,12],
'行政部':[5,14,79],
'运输部':[3,64,105],
}
let member = [];
for (let item in deps){
    const value = deps[item];
    if(Array.isArray(value)){
        member = [...member,...value]
    }
}
member = [...new Set(member)]
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>获取对象的全部属性值还要遍历吗？<code>Object.values</code>忘记了吗？还有涉及到数组的扁平化处理，为啥不用ES6提供的<code>flat</code>方法呢，还好这次的数组的深度最多只到2维，还要是遇到4维、5维深度的数组，是不是得循环嵌套循环来扁平化？</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const deps = {
    '采购部':[1,2,3],
    '人事部':[5,8,12],
    '行政部':[5,14,79],
    '运输部':[3,64,105],
}
let member = Object.values(deps).flat(Infinity);
复制代码
</code></pre></div><p>其中使用<code>Infinity</code>作为<code>flat</code>的参数，使得无需知道被扁平化的数组的维度。</p> <p><strong>补充</strong></p> <p><code>flat</code>方法不支持IE浏览器。</p> <h2 id="七、关于获取对象属性值的吐槽"><a href="#七、关于获取对象属性值的吐槽" aria-hidden="true" class="header-anchor">#</a> 七、关于获取对象属性值的吐槽</h2> <div class="language- extra-class"><pre class="language-text"><code>const name = obj &amp;&amp; obj.name;
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>ES6中的可选链操作符会使用么？</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const name = obj?.name;
复制代码
</code></pre></div><h2 id="八、关于添加对象属性的吐槽"><a href="#八、关于添加对象属性的吐槽" aria-hidden="true" class="header-anchor">#</a> 八、关于添加对象属性的吐槽</h2> <p>当给对象添加属性时，如果属性名是动态变化的，该怎么处理。</p> <div class="language- extra-class"><pre class="language-text"><code>let obj = {};
let index = 1;
let key = `topic${index}`;
obj[key] = '话题内容';
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>为何要额外创建一个变量。不知道ES6中的对象属性名是可以用表达式吗？</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>let obj = {};
let index = 1;
obj[`topic${index}`] = '话题内容';
复制代码
</code></pre></div><h2 id="九、关于输入框非空的判断"><a href="#九、关于输入框非空的判断" aria-hidden="true" class="header-anchor">#</a> 九、关于输入框非空的判断</h2> <p>在处理输入框相关业务时，往往会判断输入框未输入值的场景。</p> <div class="language- extra-class"><pre class="language-text"><code>if(value !== null &amp;&amp; value !== undefined &amp;&amp; value !== ''){
    //...
}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>ES6中新出的空值合并运算符了解过吗，要写那么多条件吗？</p> <div class="language- extra-class"><pre class="language-text"><code>if(value??'' !== ''){
  //...
}
复制代码
</code></pre></div><h2 id="十、关于异步函数的吐槽"><a href="#十、关于异步函数的吐槽" aria-hidden="true" class="header-anchor">#</a> 十、关于异步函数的吐槽</h2> <p>异步函数很常见，经常是用 Promise 来实现。</p> <div class="language- extra-class"><pre class="language-text"><code>const fn1 = () =&gt;{
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      resolve(1);
    }, 300);
  });
}
const fn2 = () =&gt;{
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      resolve(2);
    }, 600);
  });
}
const fn = () =&gt;{
   fn1().then(res1 =&gt;{
      console.log(res1);// 1
      fn2().then(res2 =&gt;{
        console.log(res2)
      })
   })
}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>如果这样调用异步函数，不怕形成地狱回调啊！</p> <p><strong>改进</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const fn = async () =&gt;{
  const res1 = await fn1();
  const res2 = await fn2();
  console.log(res1);// 1
  console.log(res2);// 2
}
复制代码
</code></pre></div><p><strong>补充</strong></p> <p>但是要做并发请求时，还是要用到<code>Promise.all()</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>const fn = () =&gt;{
   Promise.all([fn1(),fn2()]).then(res =&gt;{
       console.log(res);// [1,2]
   }) 
}
复制代码
</code></pre></div><p>如果并发请求时，只要其中一个异步函数处理完成，就返回结果，要用到<code>Promise.race()</code>。</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2021-10-12 11:57:59</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.995752a5.js" defer></script><script src="/assets/js/34.d5f7e75c.js" defer></script>
  </body>
</html>
